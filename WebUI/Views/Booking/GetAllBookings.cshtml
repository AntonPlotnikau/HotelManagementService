@model IEnumerable<BLL.Interface.Models.Booking>
@using BLL.Services

@{
    ViewBag.Title = "Все брони";
}

<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <h2 class="page-header">
                Все брони
            </h2>
            <ol class="breadcrumb">
                <li>
                    @Html.ActionLink("Домой", "Index", "Home")
                </li>
                <li class="active">Все брони</li>
            </ol>
        </div>
    </div>
    <table class="table table-bordered table-condensed table-hover table-striped">
        <tr>
            <th>Дата заезда</th>
            <th>Дата отъезда</th>
            <th>Цена (BYN)</th>
            <th>Номер</th>
            <th>Статус брони</th>
			<th>Пользователь</th>
            <th>Действия</th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.StartDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.EndDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Price)
                </td>
                <td class='col-sm'>
                    <img width="250" height="200" src="@item.Room.ImageURL" />
                </td>
                <td>
                    @item.BookingStatus.GetDisplayName()
                </td>
				<td>
					@Html.ActionLink(item.User.UserName, "GetAccountInfoByName", "Account", new { name = item.User.UserName }, null)
				</td>
				<td>
					@if (item.BookingStatus == BLL.Interface.Models.Enums.BookingStatus.Opened)
					{
						@Html.ActionLink("Подтвердить бронь", "ConfirmBooking", new { id = item.Id }) <br>
						@Html.ActionLink("Отклонить бронь", "DeclineBooking", new { id = item.Id })
					}
				</td>
            </tr>
        }
    </table>
</div>